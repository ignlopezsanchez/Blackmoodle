const mongoose = require('mongoose');
const Schema   = mongoose.Schema;
const bcrypt   = require('bcrypt');

const UserSchema = new Schema({
  username: {
    type: String,
    required: [true, "Username is required"]
  },
  email: {
    type: String,
    required: [true, "Email is required"]
  },
  password: {
    type: String,
    required: [true, "Password is required"]
  },

  subjects: [{
    type: Schema.Types.ObjectId,
    ref: 'Subject'
  }],
  photo: {
    type: String,
    default: "data:image/jpeg;base64,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"
  },
  birthDate: Date,
  
  gender: {type: String, enum: ["Hombre","Mujer"]},

  isTeacher: {
    type: Boolean,
    default: false
  },
  isAdmin: {
    type: Boolean,
    default: false
  },
  isVisible: {
    type: Boolean,
    default: true
  },

}, {
  timestamps: {
    createdAt: 'created_at',
    updatedAt: 'updated_at'
  }
});


const User = mongoose.model('User', UserSchema);
module.exports = User;